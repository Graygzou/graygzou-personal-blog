{{ define "breadcrumb" }}
  {{ partial "breadcrumb" . }}
{{ end }}

{{ define "main" }}

  <h1>{{ .Title }}</h1>

  {{- if .InSection .FirstSection -}}
  {{ .Content }}
  <section>
      <!-- Special layout for main posts/_index.html page -->
      {{/* Merge the if into the range with the where do not work properly.. */}}
      {{ $paginator := .Paginate .Pages }}
      {{ range $paginator.Pages }}
        {{ if in site.Params.blogSections (path.Base .Dir) }}
          {{ partial "boxes-section-list" (dict "context" . "fullcontent" false) }}
        {{ end }}
      {{ end }}
  </section>
  {{- else -}}
    <!-- Layout for the rest of folders inside posts/ folder -->

    <!-- Create tags navigation -->
    {{ partial "tag-navigation" (dict "context" .) }}
    

    <!-- Create all the posts ordered by date -->
    {{ $currentSectionName := .CurrentSection.Name }}
    {{ $pages := (where .Site.RegularPages "Section" "posts") }}
    {{ partial "section-list" (dict "context" . "fullcontent" false "sectionposts" $pages "sectionname" $currentSectionName) }}
    
  {{ end }}
{{ end }}